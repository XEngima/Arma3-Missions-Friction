/*
 * Name:    MissionEngine
 * Version: 1.0
 * Author:  Engima
 *
 * Description:
 * Executes the mission. Models the mission service that will run from mission start to mission end.
 */

using Sqx.Services;
using Mission.Communication;
using Mission.Common;

namespace Mission.Server
{
	public class MissionEngine : Service
	{
		private fields ["_mGameplayConfig" as IGameplayConfig, "_mArrowConfig" as IArrowConfig];
	
		public constructor("_gameplayConfig" as IGameplayConfig, "_arrowConfig" as IArrowConfig /*, ... Add all other configs necessary for the mission engine here. */)
		{
			call _base.Constructor;
			_mGameplayConfig = _gameplayConfig;
			_mArrowConfig = _arrowConfig;
		};
		
        // Runs the mission.
        protected override method Run()
        {
        	private ["_campaign" as Campaign];
        	
        	_campaign = new Campaign;
        	
        	call _campaign.RunAsync();
        	
        	// Always end a service's Run method with a call to its base method.
        	call _base.Run;
		};
	};
};
