/*
 * Name:	EasyKill
 * Date:	2020-07-01
 * Version: 1.0
 * Author:  Engima
 *
 * Description:
 * A very simple test mission.
 */

using Mission.Common;

namespace Mission.Server
{
	public class EasyKill : Mission
	{
		private fields ["_mTruck" as Object];
		
		// Creates a AirBaseMadness object.
		public constructor("_baseMarkersConfig" as IBaseMarkersConfig, "_actingSide" as Side)
		{
			[_baseMarkersConfig, _actingSide] call _base.Constructor;
			
			_self.ActingSideStartMarkers = ["m03_a_StartArea1"];
			_self.OpposingSideStartMarkers = ["m03_o_StartArea1"];
		};
		
		protected override method MissionObjective CreatePrimaryObjectiveForActing()
		{
			private _shortDescription = "Reach the truck.";
			private _longDescription = "Reach the truck.";
			
			return [_shortDescription, _longDescription] new MissionObjective;
		};
		
		protected override method MissionObjective CreatePrimaryObjectiveForOpposing()
		{
			private _shortDescription = "Reach the truck.";
			private _longDescription = "Reach the truck.";
			
			return [_shortDescription, _longDescription] new MissionObjective;
		};
		
		public override method Setup()
		{
			_mTruck = ["B_Truck_01_ammo_F", "O_Truck_03_ammo_F", MissionSide.Acting, "m03_Truck"] call _self.SpawnVehicleAtScene;
		
			call _base.Setup;
		};
		
		protected override method Boolean PrimaryObjectiveCompletedForActing()
		{
			return { _x distance _mTruck < 10 } count _self.ActingPlayers > 0;
		};
		
		protected override method Boolean PrimaryObjectiveCompletedForOpposing()
		{
			return { _x distance _mTruck < 10 } count _self.OpposingPlayers > 0;
		};
	};
};
