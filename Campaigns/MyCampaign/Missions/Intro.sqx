/*
 * Name:	Intro
 * Date:	2020-08-11
 * Version: 1.0
 * Author:  Engima
 *
 * Description:
 * The first mission of my operation.
 */

using Tvtcf.Common;
using Tvtcf.Server;
using Campaigns;

namespace Campaigns.MyCampaign
{
	public class Intro : Mission
	{
		// Creates a Intro object.
		public constructor()
		{
			call _base.Constructor;
		};
		
		protected override method InitMission("_mission" as MissionSettings)
		{
			_mission.Name = "Intro";
			_mission.StartMarkersActing = ["m06o_StartArea1"];
			_mission.StartMarkersOpposing = ["m06o_StartArea1"];
			_mission.StartTimeOfDay = 12;
			_mission.AddReturnObjectiveForActing = true;
			_mission.AddReturnObjectiveForOpposing = true;
		};
		
		protected override method Setup()
		{
			["MRAP HMG", MissionSide.Acting, BaseMarker.LandVehicles, true] call _self.CreateSideVehicleOnBaseMarker;
			
			["ASSAULT BOAT", MissionSide.Acting, BaseMarker.Naval] call _self.CreateSideVehicleOnBaseMarker;
			["AMMOBOX SPECIAL WEAPONS", MissionSide.Acting, BaseMarker.AmmoCrate] call _self.CreateSideVehicleOnBaseMarker;
			
			call _base.Setup;
		};
		
		protected override method MissionObjective CreatePrimaryObjectiveForActing()
		{
			return ["Survive one minute."] new MissionObjective;
		};
		
		protected override method MissionObjective CreatePrimaryObjectiveForOpposing()
		{
			return ["Survive one minute."] new MissionObjective;
		};
		
		protected override method ObjectiveState CheckPrimaryObjectiveStateActing()
		{
			if (_self.RemainingTime <= 29) then {
				return ObjectiveState.Succeeded;
			};

			return ObjectiveState.None;
		};
		
		protected override method ObjectiveState CheckPrimaryObjectiveStateOpposing()
		{
			if (_self.RemainingTime <= 29) then {
				return ObjectiveState.Succeeded;
			};

			return ObjectiveState.None;
		};
	};
};
