/*
 * Name:	MissionResultInfo
 * Date:	2020-07-01
 * Version: 1.0
 * Author:  Engima
 *
 * Description:
 * Contains the result of a mission.
 */
namespace Tvtcf.Common
{
	public class MissionResultInfo
	{
		// Creates a MissionResult object.t
		public constructor("_primaryObjectiveName" as String, "_primaryObjectiveState" as ObjectiveState, "_secondaryObjectiveName" as String, "_secondaryObjectiveState" as ObjectiveState, "_usingReturnObjective" as Boolean, "_returnObjectiveState" as ObjectiveState, "_menAtStart" as Scalar, "_menAtEnd" as Scalar)
		{
			_self.PrimaryObjectiveName = _primaryObjectiveName;
			_self.PrimaryObjectiveState = _primaryObjectiveState;
			_self.SecondaryObjectiveName = _secondaryObjectiveName;
			_self.SecondaryObjectiveState = _secondaryObjectiveState;
			_self.UsingReturnObjective = _usingReturnObjective;
			_self.ReturnObjectiveState = _returnObjectiveState;
			_self.MenAtStart = _menAtStart;
			_self.MenAtEnd = _menAtEnd;
			
			private _score = 0;
			
			if (_self.PrimaryObjectiveState == ObjectiveState.Succeeded) then {
				_score = _score + 100;
			};
			
			if (_self.SecondaryObjectiveState == ObjectiveState.Succeeded) then {
				_score = _score + 50;
			};
			
			if (_self.UsingReturnObjective && _self.ReturnObjectiveState == ObjectiveState.Succeeded) then {
				_score = _score + 25;
			};
			
			var _menLost = _menAtStart - _menAtEnd;
			var _scorePerMan = _score / 5;
			
			_score = _score - (_scorePerMan * _menLost);
			
			if (_menLost == _menAtStart) then // All died
			{
				_score = 0;
			};
			
			if (_score < 0) then {
				_score = 0;
			};
			
			_self.Score = _score;
		};
		
		public property String PrimaryObjectiveName { get; private set; };
		
		public property ObjectiveState PrimaryObjectiveState { get; private set; };
		
		public property String SecondaryObjectiveName { get; private set; };
		
		public property ObjectiveState SecondaryObjectiveState { get; private set; };
		
		public property Boolean UsingReturnObjective { get; private set; };
		
		public property ObjectiveState ReturnObjectiveState { get; private set; };
		
		public property Scalar MenAtStart { get; private set; };
		
		public property Scalar MenAtEnd { get; private set; };
		
		public property Scalar Score { get; private set; };
	};
};
